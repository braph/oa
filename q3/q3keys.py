#!/usr/bin/python
# -*- coding: utf-8 -*-
# Qt-Keys to Quake3-Names
# This file was generated by ./mk_q3keys.py

import re
try:    from PyQt5.QtCore import Qt
except: from PyQt4.QtCore import Qt

def qt_key_to_quake3(qKeyEvent):
    '''
    Interprete a Qt.KeyEvent as Quake3 would do.
    Return a Quake3 key as string or `None` on failure.
    '''

    code = qKeyEvent.key()
    mod  = qKeyEvent.modifiers()

    if mod & Qt.AltModifier:     return 'ALT'
    if mod & Qt.ControlModifier: return 'CTRL'
    if mod & Qt.ShiftModifier:   return 'SHIFT'
    if code == Qt.Key_NumLock:   return 'KP_NUMLOCK'

    if mod & Qt.KeypadModifier:
        try:    return QT_NUMPAD_KEYS_TO_QUAKE3[code]
        except: return None

    try:
        return QT_KEYS_TO_QUAKE3[code] # It's a special key
    except:
        try:    return chr(code).lower() # ASCII
        except: return None              # Not an ASCIi

def quake3_key_reformat(key, format='{numpad}{key}', numpad='(Numpad) '):
    ''' Make a Quake3 key more readable. '''

    if len(key) == 1:
        return key.upper()

    if key.startswith('KP_'):
        key = key[3:]
    else:
        numpad = ''

    key = __RE_REPLACE_WORD.sub(lambda m: __WORDS_REPLACE[m[0]], key)
    key = __RE_TITLE_WORD.sub(lambda m: m[0].title(), key)
    return format.format(numpad=numpad, key=key)


QT_KEYS_TO_QUAKE3 = {
'Qt.Key_Tab': 'TAB',
'Qt.Key_Enter': 'ENTER',
'Qt.Key_Escape': 'ESCAPE',
'Qt.Key_Space': 'SPACE',
'Qt.Key_Backspace': 'BACKSPACE',
'Qt.Key_CapsLock': 'CAPSLOCK',
'Qt.Key_Help': 'HELP',
'Qt.Key_Menu': 'MENU',
'Qt.Key_Pause': 'PAUSE',
'Qt.Key_Home': 'HOME',
'Qt.Key_End': 'END',
'Qt.Key_Shift': 'SHIFT',
'Qt.Key_Alt': 'ALT',
'Qt.Key_SysReq': 'SYSREQ',
'Qt.Key_ScrollLock': 'SCROLLLOCK',
'Qt.Key_F1': 'F1',
'Qt.Key_F2': 'F2',
'Qt.Key_F3': 'F3',
'Qt.Key_F4': 'F4',
'Qt.Key_F5': 'F5',
'Qt.Key_F6': 'F6',
'Qt.Key_F7': 'F7',
'Qt.Key_F8': 'F8',
'Qt.Key_F9': 'F9',
'Qt.Key_F10': 'F10',
'Qt.Key_F11': 'F11',
'Qt.Key_F12': 'F12',
'Qt.Key_F13': 'F13',
'Qt.Key_F14': 'F14',
'Qt.Key_F15': 'F15',
'Qt.Key_Insert': 'INS',
'Qt.Key_Delete': 'DEL',
'Qt.Key_PageDown': 'PGDN',
'Qt.Key_PageUp': 'PGUP',
'Qt.Key_Return': 'ENTER',
'Qt.Key_Control': 'CTRL',
'Qt.Key_Up': 'RIGHTARROW',
'Qt.Key_Down': 'DOWNARROW',
'Qt.Key_Left': 'LEFTARROW',
'Qt.Key_Right': 'RIGHTARROW',
'Qt.Key_PowerDown': 'POWER',
'Qt.Key_PowerOff': 'POWER',
'Qt.Key_NumLock': 'KP_NUMLOCK'
}
QT_NUMPAD_KEYS_TO_QUAKE3 = {
'Qt.Key_0': 'KP_INS',
'Qt.Key_1': 'KP_END',
'Qt.Key_2': 'KP_DOWNARROW',
'Qt.Key_3': 'KP_PGDN',
'Qt.Key_4': 'KP_LEFTARROW',
'Qt.Key_5': 'KP_5',
'Qt.Key_6': 'KP_RIGHTARROW',
'Qt.Key_7': 'KP_HOME',
'Qt.Key_8': 'KP_UPARROW',
'Qt.Key_9': 'KP_PGUP',
'Qt.Key_Minus': 'KP_MINUS',
'Qt.Key_Plus': 'KP_PLUS',
'Qt.Key_Equal': 'KP_EQUALS',
'Qt.Key_Slash': 'KP_SLASH',
'Qt.Key_Asterisk': 'KP_STAR',
'Qt.Key_Period': 'KP_DEL',
'Qt.Key_Enter': 'KP_ENTER'
}
Q3_KEYS = ['TAB', 'ENTER', 'ESCAPE', 'SPACE', 'BACKSPACE', 'COMMAND', 'CAPSLOCK', 'POWER', 'PAUSE', 'UPARROW', 'DOWNARROW', 'LEFTARROW', 'RIGHTARROW', 'ALT', 'CTRL', 'SHIFT', 'INS', 'DEL', 'PGDN', 'PGUP', 'HOME', 'END', 'KP_HOME', 'KP_UPARROW', 'KP_PGUP', 'KP_LEFTARROW', 'KP_5', 'KP_RIGHTARROW', 'KP_END', 'KP_DOWNARROW', 'KP_PGDN', 'KP_ENTER', 'KP_INS', 'KP_DEL', 'KP_SLASH', 'KP_MINUS', 'KP_PLUS', 'KP_NUMLOCK', 'KP_STAR', 'KP_EQUALS', 'MWHEELDOWN', 'MWHEELUP', 'SUPER', 'COMPOSE', 'MODE', 'HELP', 'PRINT', 'SYSREQ', 'SCROLLOCK', 'BREAK', 'MENU', 'EURO', 'UNDO', 'WORLD_0', 'WORLD_1', 'WORLD_2', 'WORLD_3', 'WORLD_4', 'WORLD_5', 'WORLD_6', 'WORLD_7', 'WORLD_8', 'WORLD_9', 'WORLD_10', 'WORLD_11', 'WORLD_12', 'WORLD_13', 'WORLD_14', 'WORLD_15', 'WORLD_16', 'WORLD_17', 'WORLD_18', 'WORLD_19', 'WORLD_20', 'WORLD_21', 'WORLD_22', 'WORLD_23', 'WORLD_24', 'WORLD_25', 'WORLD_26', 'WORLD_27', 'WORLD_28', 'WORLD_29', 'WORLD_30', 'WORLD_31', 'WORLD_32', 'WORLD_33', 'WORLD_34', 'WORLD_35', 'WORLD_36', 'WORLD_37', 'WORLD_38', 'WORLD_39', 'WORLD_40', 'WORLD_41', 'WORLD_42', 'WORLD_43', 'WORLD_44', 'WORLD_45', 'WORLD_46', 'WORLD_47', 'WORLD_48', 'WORLD_49', 'WORLD_50', 'WORLD_51', 'WORLD_52', 'WORLD_53', 'WORLD_54', 'WORLD_55', 'WORLD_56', 'WORLD_57', 'WORLD_58', 'WORLD_59', 'WORLD_60', 'WORLD_61', 'WORLD_62', 'WORLD_63', 'WORLD_64', 'WORLD_65', 'WORLD_66', 'WORLD_67', 'WORLD_68', 'WORLD_69', 'WORLD_70', 'WORLD_71', 'WORLD_72', 'WORLD_73', 'WORLD_74', 'WORLD_75', 'WORLD_76', 'WORLD_77', 'WORLD_78', 'WORLD_79', 'WORLD_80', 'WORLD_81', 'WORLD_82', 'WORLD_83', 'WORLD_84', 'WORLD_85', 'WORLD_86', 'WORLD_87', 'WORLD_88', 'WORLD_89', 'WORLD_90', 'WORLD_91', 'WORLD_92', 'WORLD_93', 'WORLD_94', 'WORLD_95', 'JOY1', 'JOY2', 'JOY3', 'JOY4', 'JOY5', 'JOY6', 'JOY7', 'JOY8', 'JOY9', 'JOY10', 'JOY11', 'JOY12', 'JOY13', 'JOY14', 'JOY15', 'JOY16', 'JOY17', 'JOY18', 'JOY19', 'JOY20', 'JOY21', 'JOY22', 'JOY23', 'JOY24', 'JOY25', 'JOY26', 'JOY27', 'JOY28', 'JOY29', 'JOY30', 'JOY31', 'JOY32', 'F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8', 'F9', 'F10', 'F11', 'F12', 'F13', 'F14', 'F15', 'AUX1', 'AUX2', 'AUX3', 'AUX4', 'AUX5', 'AUX6', 'AUX7', 'AUX8', 'AUX9', 'AUX10', 'AUX11', 'AUX12', 'AUX13', 'AUX14', 'AUX15', 'AUX16', 'MOUSE1', 'MOUSE2', 'MOUSE3', 'MOUSE4', 'MOUSE5']
__WORDS_REPLACE = {
'DEL': 'Delete',
'INS': 'Insert',
'CTRL': 'Control',
'ARROW': '',
'SYSREQ': 'SysReq',
'MWHEEL': 'Mouse Wheel ',
'PG': 'Page ',
'MOUSE': 'Mouse ',
'WORLD': 'World ',
'JOY': 'Joystick ',
'AUX': 'Auxiliary '
}
__RE_REPLACE_WORD = re.compile('DEL|INS|CTRL|ARROW|SYSREQ|MWHEEL|PG|MOUSE|WORLD|JOY|AUX')
__RE_TITLE_WORD = re.compile('BACKSPACE|HOME|SUPER|5|NUMLOCK|SPACE|MENU|COMMAND|BREAK|CAPSLOCK|TAB|ALT|PLUS|ESCAPE|PAUSE|MODE|STAR|SHIFT|EQUALS|UNDO|ENTER|POWER|SCROLLOCK|PRINT|HELP|MINUS|EURO|END|SLASH|COMPOSE')
